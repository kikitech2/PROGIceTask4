
import org.junit.jupiter.api.Test;
import static org.junit.jupiter.api.Assertions.*;
import java.io.ByteArrayOutputStream;
import java.io.PrintStream;

public class ProcessRecipeTest {

    private String captureOutput(Runnable method) {
        ByteArrayOutputStream outputStream = new ByteArrayOutputStream();
        PrintStream originalOut = System.out;

        System.setOut(new PrintStream(outputStream));
        try {
            method.run();
        } finally {
            System.setOut(originalOut);
        }

        return outputStream.toString().trim();
    }
    @Test
    public void testFindIngredientExists() {

        String[] ingredients = {"flour", "eggs", "butter", "oil", "sugar"};
        double[] prices = {4.0, 6.0, 10.0, 17.0, 18.0};
        ProcessRecipe recipe = new ProcessRecipe(ingredients, prices, 1430, "12345");
        String ingredientToFind = "sugar";
        String output = captureOutput(() -> recipe.findIngredient(ingredientToFind));

        String expected = "Found it! sugar costs R18.0";
        assertEquals(expected, output, "Should correctly find an existing ingredient and its price.");
    }
    @Test
    public void testFindIngredientDoesNotExist() {
        String[] ingredients = {"flour", "eggs", "butter", "oil", "sugar"};
        double[] prices = {4.0, 6.0, 10.0, 17.0, 18.0};
        ProcessRecipe recipe = new ProcessRecipe(ingredients, prices, 1430, "12345");
        String ingredientToFind = "salt";
        String output = captureOutput(() -> recipe.findIngredient(ingredientToFind));

        String expected = "Sorry, salt was not found in the recipe.";
        assertEquals(expected, output, "Should correctly indicate when an ingredient is not found.");
    }
    @Test
    public void testFindIngredientCaseInsensitive() {
        String[] ingredients = {"Flour", "Eggs"};
        double[] prices = {4.0, 6.0};
        ProcessRecipe recipe = new ProcessRecipe(ingredients, prices, 1000, "ST10543211"); // Changed to String

        String ingredientToFind = "flOuR";
        String output = captureOutput(() -> recipe.findIngredient(ingredientToFind));

        String expected = "Found it! Flour costs R4.0";
        assertEquals(expected, output, "Should find ingredient regardless of input case.");
    }
}
